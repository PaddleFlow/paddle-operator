apiVersion: batch.paddlepaddle.org/v1
kind: PaddleJob
metadata:
  name: deepfm
spec:
  cleanPodPolicy: OnFailed
  withGloo: 1
  mode: Collective
  tasks:
  - name: gpu-1
    replicas: 2
    template:
      spec:
        containers:
          - name: paddle
            image: registry.baidubce.com/paddle-operator/demo-deepfm:v1
            imagePullPolicy: Always
            command:
            - python3
            args:
            - train.py
  - name: xpu-22
    replicas: 2
    template:
      spec:
        containers:
          - name: paddle
            image: registry.baidubce.com/paddle-operator/demo-deepfm:v1
            imagePullPolicy: Always
            command:
            - python3
            args:
            - train.py
